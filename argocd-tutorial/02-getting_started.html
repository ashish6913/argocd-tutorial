<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Getting Started :: ArgoCD Tutorial</title>
    <link rel="canonical" href="https://redhat-scholars.github.io/argocd-tutorial/argocd-tutorial/02-getting_started.html">
    <link rel="prev" href="01-setup.html">
    <link rel="next" href="03-kustomize.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="../_/img/NewRHDFullLogo_4-color_white-wordmark.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="https://redhat-scholars.github.io/argocd-tutorial">ArgoCD Tutorial</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="argocd-tutorial" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="01-setup.html">Setup</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-setup.html#prerequisite">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-setup.html#kubernetes">Setup Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-setup.html#install_argocd">Install ArgoCD</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="02-getting_started.html">Getting Started</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#connect_argocd">Connecting to ArgoCD</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#deploy_sample_application">Deploy a Sample Application</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03-kustomize.html">Work with Kustomize</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03-kustomize.html#exploring_kustomize">Exploring the Kustomize</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03-kustomize.html#exploring_kustomize_cli">Exploring the Kustomize CLI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03-kustomize.html#exploring_kustomize_with_kubectl">Exploring Kustomize with Kubectl</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03-kustomize.html#deploying_kustomized_application">Deploying Kustomized Application</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03-kustomize.html#argocd_web_console">The ArgoCD Web Console</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="03-kustomize.html#kustomized_application">Kustomized Application</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="04-syncwaves-hooks.html">Sync Waves and Hooks</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="04-syncwaves-hooks.html#using_syncwaves">Using Sync Waves</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-syncwaves-hooks.html#exploring_the_manifests">Exploring the Manifests</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-syncwaves-hooks.html#deploying_the_application">Deploying the Application</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="04-syncwaves-hooks.html#exploring_resource_hooks">Exploring Resource Hooks</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-syncwaves-hooks.html#exploring_the_manifests_hooks">Exploring the Manifests</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-syncwaves-hooks.html#deploying_the_application_hooks">Deploying the Application</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">ArgoCD Tutorial</a></li>
    <li><a href="02-getting_started.html">Getting Started</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/redhat-scholars/argocd-tutorial/edit/master/documentation/modules/ROOT/pages/02-getting_started.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Getting Started</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Now that you&#8217;ve verified that Argo CD is up and running, let&#8217;s explore how to access and manage Argo CD.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="connect_argocd"><a class="anchor" href="#connect_argocd"></a>Connecting to Argo CD</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Argo CD generates a default <code>admin</code> user, and a random password when first deployed.</p>
</div>
<div class="paragraph">
<p>You can connect to Argo CD using this user account via the CLI or web console.</p>
</div>
<div class="sect2">
<h3 id="_connecting_with_the_cli"><a class="anchor" href="#_connecting_with_the_cli"></a>Connecting with the CLI</h3>
<div class="paragraph">
<p>To login using the CLI you&#8217;ll need to obtain the admin password and URL for the Argo CD instance:</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset1_minikube"></a>Minikube</p>
</li>
<li>
<p><a id="tabset1_openshift"></a>OpenShift</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset1_minikube">
<div class="paragraph">
<p>To get the Argo CD password execute:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">argoPass=$(kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 -d)
echo $argoPass</code></pre>
</div>
</div>
<div class="paragraph">
<p>Get ArgoCD URL:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">argoURL=$(minikube -p gitops service argocd-server -n argocd --url -p gitops | tail -n 1 | sed -e 's|http://||')
echo $argoURL</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_openshift">
<div class="paragraph">
<p>Extract the password from the admin user Secret:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">argoPass=$(oc get secret/openshift-gitops-cluster -n openshift-gitops -o jsonpath='{.data.admin\.password}' | base64 -d)
echo $argoPass</code></pre>
</div>
</div>
<div class="paragraph">
<p>Get the Route for the Argo CD/OpenShift GitOps server:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">argoURL=$(oc get route openshift-gitops-server -n openshift-gitops -o jsonpath='{.spec.host}{"\n"}')
echo $argoURL</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Login to Argo CD with the <code>argocd</code> CLI using the URL and password:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">argocd login --insecure --grpc-web $argoURL  --username admin --password $argoPass</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following message will be printed upon successful login:</p>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">'admin:login' logged in successfully</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_connecting_with_the_web_console"><a class="anchor" href="#_connecting_with_the_web_console"></a>Connecting with the Web Console</h3>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset2_minikube"></a>Minikube</p>
</li>
<li>
<p><a id="tabset2_openshift"></a>OpenShift</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset2_minikube">
<div class="paragraph">
<p>Expose the ArgoCD console using the minikube service.</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">minikube -p gitops service argocd-server -n argocd</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset2_openshift">
<div class="paragraph">
<p>In the OpenShift Web Console, expand the <strong>Application Launcher</strong> in the  top-right and click the <strong>ArgoCD</strong> icon:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/argopad.png" alt="ArgoCD">
</div>
</div>
<div class="paragraph">
<p>Alternatively, get Argo CD Route using the <code>oc</code> CLI as previously done:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get route openshift-gitops-server -n openshift-gitops -o jsonpath='{.spec.host}{"\n"}'</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Access the Argo CD console by logging in with the username <code>admin</code> and the password extracted in the previous step:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/argocd-login.png" alt="ArgoCDLogin" width="600">
</div>
</div>
<div class="paragraph">
<p>Once you&#8217;ve logged in, you should see the following page. This is the Argo CD Web UI.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/argocd-login2.png" alt="ArgoCDLogin2" width="600">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deploy_sample_application"><a class="anchor" href="#deploy_sample_application"></a>Deploy a Sample Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We&#8217;ll be using the <a href="https://github.com/redhat-developer-demos/openshift-gitops-examples" target="_blank" rel="noopener">redhat-developer-demos/openshift-gitops-examples</a> Git repository to deploy our first application. It contains the manifests that define the application state.</p>
</div>
<div class="sect2">
<h3 id="_review_the_application_manifests"><a class="anchor" href="#_review_the_application_manifests"></a>Review the Application Manifests</h3>
<div class="paragraph">
<p>The application manifests include a Namespace, Deployment, and networking manifests for Minikube/OpenShift. Deploying these manifests to a cluster will result in an application that supports ingress.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Review, but do not apply these manifests to your cluster. We will do that shortly using Argo CD.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A <strong>Namespace</strong>:</p>
</div>
<div class="listingblock">
<div class="title"><a href="https://github.com/redhat-developer-demos/openshift-gitops-examples/blob/main/apps/bgd/overlays/bgd/bgd-ns.yaml" target="_blank" rel="noopener">bgd-namespace.yaml</a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: v1
kind: Namespace
metadata:
  name: bgd
spec: {}
status: {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A <strong>Deployment</strong>:</p>
</div>
<div class="listingblock">
<div class="title"><a href="https://github.com/redhat-developer-demos/openshift-gitops-examples/blob/main/apps/bgd/base/bgd-deployment.yaml" target="_blank" rel="noopener">bgd-deployment.yaml</a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: bgd
  name: bgd
  namespace: bgd
spec:
  replicas: 1
  selector:
    matchLabels:
      app: bgd
  strategy: {}
  template:
    metadata:
      labels:
        app: bgd
    spec:
      containers:
      - image: quay.io/redhatworkshops/bgd:latest
        name: bgd
        env:
        - name: COLOR
          value: "blue"
        resources: {}
---</code></pre>
</div>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset3_minikube"></a>Minikube</p>
</li>
<li>
<p><a id="tabset3_openshift"></a>OpenShift</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset3_minikube">
<div class="paragraph">
<p>A <strong>Service</strong> of type <code>NodePort</code>:</p>
</div>
<div class="listingblock">
<div class="title"><a href="https://github.com/redhat-developer-demos/openshift-gitops-examples/blob/minikube/apps/bgd/base/bgd-svc.yaml" target="_blank" rel="noopener">bgd-svc.yaml</a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: bgd
  name: bgd
  namespace: bgd
spec:
  type: NodePort
  ports:
  - port: 8080
    protocol: TCP
    targetPort: 8080
  selector:
    app: bgd
---</code></pre>
</div>
</div>
<div class="paragraph">
<p>An <strong>Ingress</strong>:</p>
</div>
<div class="listingblock">
<div class="title"><a href="https://github.com/redhat-developer-demos/openshift-gitops-examples/blob/minikube/apps/bgd/base/bgd-ingress.yaml" target="_blank" rel="noopener">bgd-ingress.yaml</a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: bgd
spec:
  rules:
    - host: bgd.devnation
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: bgd
                port:
                  number: 8080</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset3_openshift">
<div class="paragraph">
<p>A <strong>Service</strong> of type <code>ClusterIP</code>:</p>
</div>
<div class="listingblock">
<div class="title"><a href="https://github.com/redhat-developer-demos/openshift-gitops-examples/blob/main/apps/bgd/base/bgd-svc.yaml" target="_blank" rel="noopener">bgd-svc.yaml</a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">---
apiVersion: v1
kind: Service
metadata:
  creationTimestamp: null
  labels:
    app: bgd
  name: bgd
  namespace: bgd
spec:
  ports:
  - port: 8080
    protocol: TCP
    targetPort: 8080
  selector:
    app: bgd
---</code></pre>
</div>
</div>
<div class="paragraph">
<p>A <strong>Route</strong>:</p>
</div>
<div class="listingblock">
<div class="title"><a href="https://github.com/redhat-developer-demos/openshift-gitops-examples/blob/main/apps/bgd/base/bgd-route.yaml" target="_blank" rel="noopener">bgd-route.yaml</a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: route.openshift.io/v1
kind: Route
metadata:
  labels:
    app: bgd
  name: bgd
  namespace: bgd
spec:
  port:
    targetPort: 8080
  to:
    kind: Service
    name: bgd
    weight: 100</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_deploy_the_application"><a class="anchor" href="#_deploy_the_application"></a>Deploy the Application</h3>
<div class="paragraph">
<p>A managed collection of manifests is known as an <code>Application</code> within Argo CD. Therefore, you must define it as such using an <a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/declarative-setup/#applications" target="_blank" rel="noopener">Application CR (CustomResource)</a> in order to have Argo CD apply these manifests in your cluster.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s review the <a href="https://github.com/redhat-scholars/argocd-tutorial/blob/master/assets/bgd-app/bgd-app.yaml">Argo CD Application manifest</a> used to deploy this application and break this down a bit:</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset4_minikube"></a>Minikube</p>
</li>
<li>
<p><a id="tabset4_openshift"></a>OpenShift</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset4_minikube">
<div class="listingblock">
<div class="title"><a href="https://github.com/redhat-scholars/argocd-tutorial/blob/master/assets/bgd-app/bgd-app.yaml" target="_blank" rel="noopener">bgd-app.yaml</a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: bgd-app
  namespace: argocd
spec:
  destination:
    namespace: bgd
    server: <a href="https://kubernetes.default.svc" class="bare">https://kubernetes.default.svc</a> <i class="conum" data-value="1"></i><b>(1)</b>
  project: default <i class="conum" data-value="2"></i><b>(2)</b>
  source: <i class="conum" data-value="3"></i><b>(3)</b>
    path: apps/bgd/overlays/bgd
    repoURL: <a href="https://github.com/redhat-developer-demos/openshift-gitops-examples" class="bare">https://github.com/redhat-developer-demos/openshift-gitops-examples</a>
    targetRevision: minikube
  syncPolicy: <i class="conum" data-value="4"></i><b>(4)</b>
    automated:
      prune: true
      selfHeal: false
    syncOptions:
    - CreateNamespace=true</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The destination server is the same server we installed Argo CD on.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Here you&#8217;re installing the application in Argo CD&#8217;s <code>default</code> project (<code>.spec.project</code>).</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The manifest repo, and th path within it where the YAML resides.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The <code>syncPolicy</code> is set to <code>automated</code>. It will automatically prune resources resources that have been removed from the Git repo, but will not automatically correct resources that deviate from the definition stored in the repo, i.e manual changes use <code>kubectl</code> will not be "healed".</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Apply the Application CR by running the following command:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl apply -f documentation/modules/ROOT/examples/minikube/bgd-app/bgd-app.yaml</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset4_openshift">
<div class="listingblock">
<div class="title"><a href="https://github.com/redhat-scholars/argocd-tutorial/blob/master/assets/bgd-app/bgd-app.yaml" target="_blank" rel="noopener">bgd-app.yaml</a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: bgd-app
  namespace: openshift-gitops
spec:
  destination:
    namespace: bgd
    server: <a href="https://kubernetes.default.svc" class="bare">https://kubernetes.default.svc</a> <i class="conum" data-value="1"></i><b>(1)</b>
  project: default <i class="conum" data-value="2"></i><b>(2)</b>
  source: <i class="conum" data-value="3"></i><b>(3)</b>
    path: apps/bgd/overlays/bgd
    repoURL: <a href="https://github.com/redhat-developer-demos/openshift-gitops-examples" class="bare">https://github.com/redhat-developer-demos/openshift-gitops-examples</a>
    targetRevision: main
  syncPolicy: <i class="conum" data-value="4"></i><b>(4)</b>
    automated:
      prune: true
      selfHeal: false
    syncOptions:
    - CreateNamespace=true</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The destination server is the same server we installed Argo CD on.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Here you&#8217;re installing the application in Argo CD&#8217;s <code>default</code> project (<code>.spec.project</code>).
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Argo CD&#8217;s concept of a <code>Project</code> is different than OpenShift&#8217;s. Here you&#8217;re installing the application in Argo CD&#8217;s <code>default</code> project (<code>.spec.project</code>). <strong>NOT</strong> OpenShift&#8217;s default project.
</td>
</tr>
</table>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The manifest repo, and th path within it where the YAML resides.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The <code>syncPolicy</code> is set to <code>automated</code>. It will automatically prune resources resources that have been removed from the Git repo, but will not automatically correct resources that deviate from the definition stored in the repo, i.e manual changes made using <code>kubectl</code> will not be "healed".</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Apply the Application CR by running the following command:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl apply -f documentation/modules/ROOT/examples/bgd-app/bgd-app.yaml</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The newly created Application appears as a tile with the title <code>bgd-app</code> in the Argo CD UI.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/argocd-app1.png" alt="SampleApp">
</div>
</div>
<div class="paragraph">
<p>Clicking on this tile takes you to the application details page. You may see it as still progressing or fully synced.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/argocd-app2.png" alt="SampleApp">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You may have to click on <code>show hidden resources</code> on this page to see all of the resources.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>At this point the application should be up and running. Verify that the resources were created:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl get all -n bgd</code></pre>
</div>
</div>
<div class="paragraph">
<p>The output should list a Service, Deployment, and Pod:</p>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME                       READY   STATUS    RESTARTS   AGE
pod/bgd-788cb756f7-kz448   1/1     Running   0          10m

NAME          TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE
service/bgd   ClusterIP   172.30.111.118   &lt;none&gt;        8080/TCP   10m

NAME                  READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/bgd   1/1     1            1           10m</code></pre>
</div>
</div>
<div class="paragraph">
<p>Verify the the rollout is complete:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl rollout status deploy/bgd -n bgd</code></pre>
</div>
</div>
<div class="paragraph">
<p>Obtain the URL, and visit your application in a web browser:</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset5_minikube"></a>Minikube</p>
</li>
<li>
<p><a id="tabset5_openshift"></a>OpenShift</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset5_minikube">
<div class="paragraph">
<p>Add Minikube IP (<code>minikube ip</code>) and the Ingress hostname <code>bgd.devnation</code> to your Host file, like <code>/etc/hosts</code>.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">192.168.39.242 bgd.devnation</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset5_openshift">
<div class="paragraph">
<p>From <strong>Web Console</strong>, select <strong>bgd</strong> project from drop-down menu, then click to the application&#8217;s Route to access it.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/bgdapp.png" alt="BGD App">
</div>
</div>
<div class="paragraph">
<p>Alternatively, get app Route from CLI:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get route bgd -n bgd -o jsonpath='{.spec.host}{"\n"}'</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Your application should look like this.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/bgd.png" alt="SampleApp">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_addressing_configuration_drift"><a class="anchor" href="#_addressing_configuration_drift"></a>Addressing Configuration Drift</h3>
<div class="paragraph">
<p>Let&#8217;s introduce a change in the application environment! Patch the live Deployment manifest to change the color
of the bubbles in the application from blue to green:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl -n bgd patch deploy/bgd --type='json' -p='[{"op": "replace", "path": "/spec/template/spec/containers/0/env/0/value", "value":"green"}]'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Wait for the rollout to happen:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl rollout status deploy/bgd -n bgd</code></pre>
</div>
</div>
<div class="paragraph">
<p>Refresh the tab where your application is running. You should see green bubbles.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/bgd-green.png" alt="BDG Green">
</div>
</div>
<div class="paragraph">
<p>Looking over at your Argo CD Web UI, you can see that Argo detects your
application as "Out of Sync".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/out-of-sync.png" alt="Out of Sync">
</div>
</div>
<div class="paragraph">
<p>You can sync your app via the Argo CD by:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>First clicking <code>SYNC</code></p>
</li>
<li>
<p>Then clicking <code>SYNCHRONIZE</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Alternatively, you can run the following command:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">argocd app sync bgd-app</code></pre>
</div>
</div>
<div class="paragraph">
<p>After the sync process is done, the Argo CD UI should mark the application as in sync.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/fullysynced.png" alt="Fully Synced">
</div>
</div>
<div class="paragraph">
<p>Reload the page on the tab where the application is running. The bubbles should have returned to their original blue color.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/bgd.png" alt="BDG App">
</div>
</div>
<div class="paragraph">
<p>You can setup Argo CD to automatically correct drift by setting the
<code>Application</code> manifest to do so. Example:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">spec:
  syncPolicy:
    automated:
      prune: true
      selfHeal: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or, as in our case, after the fact by running the following command:</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset6_minikube"></a>Minikube</p>
</li>
<li>
<p><a id="tabset6_openshift"></a>OpenShift</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset6_minikube">
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl patch application/bgd-app -n argocd --type=merge -p='{"spec":{"syncPolicy":{"automated":{"prune":true,"selfHeal":true}}}}'</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset6_openshift">
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl patch application/bgd-app -n openshift-gitops --type=merge -p='{"spec":{"syncPolicy":{"automated":{"prune":true,"selfHeal":true}}}}'</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="01-setup.html">Setup</a></span>
  <span class="next"><a href="03-kustomize.html">Work with Kustomize</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
